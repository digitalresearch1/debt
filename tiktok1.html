
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>VPN App Experience Research Study</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tesseract.js v6 -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@6/dist/tesseract.min.js"></script>

  <style>
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .card { border: 1px solid rgb(226 232 240); border-radius: 18px; }
    .mono { font-variant-numeric: tabular-nums; }
  </style>
</head>

<body class="bg-slate-50 text-slate-900">
<main class="max-w-xl mx-auto px-4 py-10">

  <!-- MAIN -->
  <section class="card bg-white shadow-sm p-6 space-y-5">
    <div class="space-y-2">
      <p class="text-sm text-slate-600">App experience research study</p>
      <p class="text-lg font-semibold">Try a VPN app for ~1 minute (then share feedback)</p>
    </div>

    <!-- DISCLOSURE / PURPOSE -->
    <div class="rounded-xl bg-slate-50 border border-slate-200 p-4 text-sm text-slate-700 space-y-2">
      <p class="font-semibold text-slate-900">Purpose of this study</p>
      <p>
        This is a short <strong>independent user-experience study</strong> about first impressions of a VPN app.
        <strong>Install</strong> and use it for a few minutes. Give us your honest review about it. 
      </p>
      <p class="text-xs text-slate-500">
        
      </p>
    </div>

    <!-- OPTIONAL: SCREENSHOT PREVIEW YOU UPLOADED -->
    <!-- Replace src with your hosted image URL if you want to show an example screenshot -->
    <!--
    <div class="rounded-xl border border-slate-200 overflow-hidden">
      <img src="YOUR_HOSTED_SCREENSHOT_URL.png" alt="Example screen" class="w-full block">
    </div>
    -->

    <!-- INSTRUCTIONS -->
    <div class="text-sm text-slate-700 space-y-2">
      <p class="font-semibold text-slate-900">What to do</p>
      <ol class="list-decimal pl-5 space-y-1">
        <li>Tap <strong>Open VPN Download</strong> to visit the offer page.</li>
        <li>Click on Install VPN app and open it for about <strong>Use it for a few minutes</strong>.</li>
        <li>Return here and upload a <strong>home screen screenshot</strong> showing the app icon/name.</li>
        <li>After validation, answer a few quick feedback questions and finish.</li>
      </ol>
      <p class="text-xs text-slate-500">
        A clear home screen screenshot where the app name is visible works best.
      </p>
    </div>

    <!-- ACTION BUTTONS -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
      <button id="btnOpen"
        class="rounded-xl px-4 py-3 text-sm font-semibold bg-slate-900 text-white hover:bg-slate-800">
        Open VPN Download
      </button>

      <button id="btnGoFeedback"
        class="rounded-xl px-4 py-3 text-sm font-semibold bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-40"
        disabled>
        Continue to feedback
      </button>
    </div>

    <p id="hint" class="text-xs text-slate-500"></p>

    <!-- SCREENSHOT + OCR -->
    <div class="rounded-xl border border-slate-200 bg-white p-4 space-y-3">
      <p class="text-sm font-semibold">Upload home screen screenshot (required)</p>
      <p class="text-xs text-slate-600">
        We unlock “Continue” only if we detect the VPN app name (or “VPN”) in your screenshot.
      </p>

      <input id="shot" type="file" accept="image/*" class="block w-full text-sm"/>

      <button id="btnOcr"
        class="rounded-xl px-4 py-3 text-sm font-semibold bg-slate-900 text-white disabled:opacity-40"
        disabled>
        Validate screenshot
      </button>

      <div>
        <span class="text-xs text-slate-600">OCR status</span>
        <span id="ocrPct" class="text-xs mono ml-2">0%</span>
        <div class="h-2 bg-slate-200 rounded mt-1">
          <div id="ocrBar" class="h-full bg-indigo-600" style="width:0%"></div>
        </div>
        <p id="ocrMsg" class="text-xs text-slate-600 mt-1"></p>
      </div>

      <p id="gateMsg" class="text-xs text-slate-500"></p>
    </div>
  </section>

  <!-- FEEDBACK -->
  <section id="feedback" class="card bg-white shadow-sm p-6 mt-6 space-y-4 hidden">
    <p class="text-lg font-semibold">VPN app feedback</p>

    <div class="space-y-2 text-sm">
      <p class="font-semibold">1) Was the install/open process easy?</p>
      <label class="block"><input type="radio" name="ease" value="very_easy"> Very easy</label>
      <label class="block"><input type="radio" name="ease" value="ok"> Okay</label>
      <label class="block"><input type="radio" name="ease" value="hard"> Hard</label>
      <label class="block"><input type="radio" name="ease" value="didnt_install"> I didn’t install</label>
    </div>

    <div class="space-y-2 text-sm">
      <p class="font-semibold">2) What did you notice in the first minute?</p>
      <textarea id="notice" class="w-full border border-slate-300 rounded-xl p-3 text-sm" rows="3"
        placeholder="Example: onboarding screens, ads, paywall, permissions, speed..."></textarea>
    </div>

    <div class="space-y-2 text-sm">
      <p class="font-semibold">3) Would you keep this VPN installed?</p>
      <label class="block"><input type="radio" name="keep" value="yes"> Yes</label>
      <label class="block"><input type="radio" name="keep" value="no"> No</label>
      <label class="block"><input type="radio" name="keep" value="not_sure"> Not sure</label>
    </div>

    <div class="space-y-2 text-sm">
      <p class="font-semibold">4) Why?</p>
      <textarea id="why" class="w-full border border-slate-300 rounded-xl p-3 text-sm" rows="3"
        placeholder="Tell us what you liked or disliked."></textarea>
    </div>

    <button id="btnSubmit"
      class="w-full rounded-xl px-4 py-3 text-sm font-semibold bg-slate-900 text-white hover:bg-slate-800">
      Submit & finish
    </button>

    <p class="text-xs text-slate-500">
      By submitting, you confirm this feedback is based on your own experience.
    </p>
  </section>

</main>

<script>
/** ✅ YOUR LINKS **/
const OFFER_URL = "https://data527.click/d96ed81366e2820b1e47/a28a92a800/?placementName=default";

/** Set this to your “complete”/thank-you redirect (CloudResearch / PureSpectrum / etc.) **/
const COMPLETE_URL = "https://connect.cloudresearch.com/participant/project/FA9AE06C6B/complete";

/** ✅ What OCR should look for in the screenshot.
 * Put the actual VPN app name shown under the icon.
 * From your screenshot text, this might be: "Secure360" (edit if different)
 */
const EXPECTED_APP_KEYWORDS = [
  "secure360",   // <-- change to your real app label
  "vpn"
];

let verified = false;
let attempts = 0;
const MAX_ATTEMPTS = 3;

const btnOpen = document.getElementById("btnOpen");
const btnOcr = document.getElementById("btnOcr");
const btnGo = document.getElementById("btnGoFeedback");
const shot = document.getElementById("shot");
const ocrMsg = document.getElementById("ocrMsg");
const gateMsg = document.getElementById("gateMsg");
const ocrBar = document.getElementById("ocrBar");
const ocrPct = document.getElementById("ocrPct");

btnOpen.onclick = () => {
  window.open(OFFER_URL, "_blank", "noopener,noreferrer");
  gateMsg.textContent = "After you try the VPN app, upload your home screen screenshot below.";
};

shot.onchange = () => {
  btnOcr.disabled = !shot.files || !shot.files[0];
};

function setProgress(pct, msg) {
  ocrBar.style.width = pct + "%";
  ocrPct.textContent = pct + "%";
  if (msg) ocrMsg.textContent = msg;
}

btnOcr.onclick = async () => {
  const file = shot.files[0];
  if (!file) return;

  attempts += 1;
  btnOcr.disabled = true;
  btnGo.disabled = true;
  verified = false;

  setProgress(5, "Starting OCR…");

  const worker = await Tesseract.createWorker("eng", 1, {
    logger: m => {
      if (m.status === "recognizing text") {
        const pct = Math.max(5, Math.min(95, Math.round((m.progress || 0) * 95)));
        setProgress(pct);
      }
    }
  });

  try {
    const { data } = await worker.recognize(file);
    const text = (data.text || "").toLowerCase().replace(/\s+/g, " ");

    await worker.terminate();
    setProgress(100);

    const hit = EXPECTED_APP_KEYWORDS.some(k => text.includes(k.toLowerCase()));

    if (hit) {
      verified = true;
      ocrMsg.textContent = "✅ Detected VPN app text in the screenshot. Continue unlocked.";
      btnGo.disabled = false;
      btnOcr.disabled = false;
    } else {
      const left = MAX_ATTEMPTS - attempts;
      ocrMsg.textContent =
        "❌ We couldn’t detect the VPN app name. Please upload a clearer home-screen screenshot (app label visible).";

      if (left > 0) {
        gateMsg.textContent = `Attempts left: ${left}.`;
        btnOcr.disabled = false;
      } else {
        gateMsg.textContent = "Maximum attempts reached.";
        // If you want a disqualify redirect, put it here:
        // window.location.href = "https://example.com/disqualify";
      }
    }
  } catch (e) {
    try { await worker.terminate(); } catch (_) {}
    setProgress(0, "OCR error. Please try again with a clearer screenshot.");
    btnOcr.disabled = false;
  }
};

btnGo.onclick = () => {
  if (!verified) return;
  document.getElementById("feedback").classList.remove("hidden");
  document.getElementById("feedback").scrollIntoView({ behavior: "smooth", block: "start" });
};

document.getElementById("btnSubmit").onclick = () => {
  // (Optional) You can send feedback to your server here via fetch().
  window.location.href = COMPLETE_URL;
};
</script>

</body>
</html>
